# Psensor README

## Introduction

Psensor is a graphical hardware monitoring application for Linux.

It draws realtime charts and raises alerts about:

 * the temperature of the motherboard and CPU sensors (using
   lm-sensors).
 * the temperature of the NVidia GPUs (using XNVCtrl).
 * the temperature of ATI GPUs (using ATI ADL SDK).
 * the temperature of the Hard Disk Drives (using hddtemp, libatasmart
   or udisks2).
 * the rotation speed of the fans.
 * the temperature of a remote computer.
 * the CPU load.

Alerts are using Desktop Notification and a specific GTK+ status icon.

For Ubuntu users, Psensor is providing an Application Indicator which turns
red under alert and a menu for quickly check all sensors.

It is possible to monitor remotely a computer:

 * start `psensor-server` on the remote computer.

 * start `psensor` using: `psensor --url=http://hostname:3131`.

`psensor-server` is a minimal Web server, a Web browser can be used to
monitor the remote computer by opening the URL:
`http://hostname:3131`.

**WARNING**: `psensor-server` does not provide any way to restrict the connection
to the HTTP server, worst, no effort has been made against malicious
HTTP attacks.  You should make the `psensor-server` port available
only to a network or computer you trust by using the usual network
security tools of the system (for example:
[iptables](http://www.netfilter.org/projects/iptables/index.html)).

## Project Status

**Note**: This project appears to be unmaintained since 2016 (last release v1.2.0).
The PPAs and daily builds mentioned below are likely no longer actively maintained.

## Installation Using Distribution Packages

### Debian

For Debian, the binary and source packages are available in the
Wheezy, unstable and testing repositories.

Debian package information is available at:
http://packages.qa.debian.org/p/psensor.html.

To do the installation:

```bash
sudo apt-get install psensor psensor-server
```

### Ubuntu

Since Ubuntu Oneiric (11.10), psensor is available in the universe
repository of Ubuntu.

To install `psensor` or `psensor-server`:

```bash
sudo apt-get install psensor
sudo apt-get install psensor-server
```

Or search them in the Ubuntu Software Center.

For other Ubuntu releases or to use a more recent release, you may use
the dedicated PPA (note: these PPAs may not be actively maintained):

**Stable version:**

```bash
sudo apt-get apt-add-repository ppa:/jfi/psensor
sudo apt-get update
sudo apt-get install psensor
sudo apt-get install psensor-server
```

**Development version** (may not be actively maintained):

```bash
sudo apt-get apt-add-repository ppa:/jfi/psensor-unstable
sudo apt-get update
sudo apt-get install psensor
sudo apt-get install psensor-server
```

**Daily trunk build** (likely no longer active - last update 2016):

```bash
sudo apt-get apt-add-repository ppa:/jfi/psensor-daily-trunk
sudo apt-get update
sudo apt-get install psensor
sudo apt-get install psensor-server
```

## Building From Git Repository

Building from a git clone requires regenerating autotools-generated files
before running configure.

### Prerequisites for Building From Git

In addition to the compilation prerequisites (listed below), you will need:

 * **autoconf** - Generates `configure` from `configure.ac`
 * **automake** - Generates `Makefile.in` files from `Makefile.am` files
 * **libtool** - May be required for some dependencies
 * **gettext** tools - For internationalization support

These are typically available via your distribution's package manager:

```bash
# Debian/Ubuntu
sudo apt-get install autoconf automake libtool gettext

# Fedora/RHEL
sudo dnf install autoconf automake libtool gettext
```

### Regenerating Build Files

From a git clone, regenerate the autotools files. You can use the provided
bootstrap script:

```bash
./bootstrap
```

Or run autoreconf directly:

```bash
autoreconf -fiv
```

The `autoreconf -fiv` command:
- `-f` - Force regeneration of files
- `-i` - Install missing auxiliary files (like `compile`, `depcomp`, `install-sh`, etc.)
- `-v` - Verbose output

Alternatively, you can run individual autotools commands:

```bash
aclocal --install
autoconf
autoheader
automake --add-missing --copy
```

### Generated Files

The following files are generated by autotools and should not be manually edited:

* `configure` - Generated from `configure.ac` by autoconf
* `Makefile.in` files - Generated from `Makefile.am` files by automake
* `aclocal.m4` - Generated from `m4/*.m4` files by aclocal
* `config.h.in` - Generated from `configure.ac` by autoheader
* Helper scripts installed by automake/gettext:
  - `compile`, `depcomp`, `install-sh`, `missing`, `ar-lib`
  - `config.guess`, `config.sub`, `test-driver`

These files are tracked in git for convenience (so users building from
source archives don't need autotools), but developers can regenerate them
using `autoreconf -fiv` when needed.

### Build Steps From Git

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd psensor
   ```

2. Regenerate autotools files (using the bootstrap script):
   ```bash
   ./bootstrap
   ```
   
   Or manually:
   ```bash
   autoreconf -fiv
   ```

3. Continue with standard build steps (see below)

## Installation From Source Archive

`psensor` and `psensor-server` can be compiled and installed on any
modern GNU/Linux distribution.

### Compilation Prerequisites

The compilation of `psensor` requires:

 * make
 * gcc (or llvm)
 * lm-sensors
 * library sensors4
 * library gtk3 >=3.4
 * help2man (optional, required to produce the manpage)
 * asciidoc (optional, required to produce the html version of the
   faq)
 * cppcheck (optional, static source checker)
 * library libnotify (optional)
 * library libappindicator >= 3.0 (optional)
 * library libXNVCtrl (optional)
 * library json-c >= 0.11.99 and curl (optional, required for remote monitoring)
 * library unity (>=v3.4.2, optional)
 * library gtop2 (optional, required for CPU usage)
 * library atasmart (optional, for disk monitoring)
 * library udisk2 (optional, for disk monitoring)

The specific requirements for `psensor-server`:

 * library libmicrohttpd 
 * library json-c >= 0.11.99

### Compilation and Installation Steps

**Note**: Source archives already contain all autotools-generated files
(`configure`, `Makefile.in`, etc.), so you do not need autotools installed
to build from a source archive. Simply follow these steps:

1. Download the source archive from: http://wpitchoune.net/psensor/files
2. Extract files from the source archive
3. Configure and compile:
   ```bash
   ./configure
   make
   ```
4. Installation: `make install` (requires root permission)
5. Start the sensor detection script: `sensors-detect` and follow the
   instructions. Reboot or activate the kernel modules which have
   been found.
6. Run: `psensor`

### ATI/AMD GPU Support

When the OpenSource ATI driver is used, the monitoring
information is available throw lm-sensors and does not require the
following instructions.

When the proprietary ATI driver(Catalyst) is used, the build is
requiring an additional library.

Download the
[ATI ADL SDK](http://developer.amd.com/sdks/ADLSDK/Pages/default.aspx)
and extracts the files of the archive into a directory `[dir]`.

Replace step 3. of the above section by:

```bash
./configure --with-libatiadl=[dir]
```

where `[dir]` must be the directory where you have extracted the ATI ADL SDK.
Other steps are identical.

## Contact

Bugs and comments can be sent to jeanfi@gmail.com.

Home page: http://wpitchoune.net/psensor

